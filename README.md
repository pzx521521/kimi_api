# 和[KimiAI](https://kimi.moonshot.cn/chat/)聊天API

## 配置文件解释

### 配置文件`config.json`

```
    "first_jwt_access": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9......",
    "first_jwt_refresh": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9......",
    "chat_id": "cs4i0im65raal8e0e93g",
    "kimiplus_id": "conpdi8t7lag4rq67pqg"
```
jwt前两端可以通过base64解码,[网站](https://jwt.io/)

+ `first_jwt_access` 指的是聊天必须携带的jwt,jwt's payload中 `"typ": "access"`
+ `first_jwt_refresh` 指的是聊天jwt过期时,要刷新jwt所需要的jwt payload中 `"typ": "refresh"`
+ `chat_id` 指的是不同聊天对应的ID
+ `kimiplus_id` 指的是你用户的ID

### 配置文件`keyword.txt`

配置关键词(一行一个),即你的聊天内容

### 如何使用

+ 需要**配置文件**仅需第一次配置,之后可以无需配置使用(jwt_refresh给了3个月的过期时间)
+ 注册账号,打开[kimiplu]([https://kimi.moonshot.cn/kimiplus-square)任意类型的chat,如我测试的使用的小红书生成,
+ 打开浏览器调试工具
+ 随意发送一个内容
+ 此时浏览器地址`https://kimi.moonshot.cn/chat/cs4i0im65raal8e0e93g`, `cs4i0im65raal8e0e93g`即是chat_id,生成的内容都是在这个对话里面,网站上会有历史记录
+ **开发者工具中** 打开xhr过滤,也可以不打开,找到**refresh**链接,打开**预览或者响应**,里面是jwt_access, jwt_refresh,写入配置文件即可
  [![pAYtai4.png](https://s21.ax1x.com/2024/10/12/pAYtai4.png)](https://imgse.com/i/pAYtai4)
+ **开发者工具中** 打开xhr过滤,也可以不打开,找到**stream**链接,打开载荷,里面是kimiplus_id,写入配置文件即可
  [![pAYtwW9.png](https://s21.ax1x.com/2024/10/12/pAYtwW9.png)](https://imgse.com/i/pAYtwW9)

### 运行结果

```
正在获取文章:鸡肉 土豆
*标题*：【搞钱必看】土豆炖鸡，打工人的治愈系晚餐！🥔🐓\n\n*正文*：\nHey，亲爱的打工人！结束了一天的辛勤工作，是时候用一道简单又美味的土豆炖鸡来犒劳豆，这个看似普通的食材，却能带来满满的温暖和能量。它的口感软糯，能够很好地吸收鸡肉的鲜美。\n🐓【鸡肉的鲜美】\n选择新鲜的鸡肉，肉质鲜嫩多汁，与土豆，倒入适量的水和调料，慢火炖煮至土豆软烂，鸡肉入味。\n👨‍🍳【小贴士】\n在炖煮过程中，可以适当加入一些胡萝卜和洋葱，增加营养的同时，也让整道菜的味道。\n\n*标签*：#土豆炖鸡 #打工人晚餐 #治愈系美食 #秘方 #建议收藏 #家的味道 #搞钱必看
正在获取文章:写一个关于番茄的文章
*标题*：【秘方】番茄的魔法，让你的餐桌天天有惊喜！🍅✨\n\n*正文*：\nHey，亲爱的小伙伴们！今天我要给你们安利的不是一道菜，而是一个超级食材——番茄🍅。氧化剂——番茄红素，它能帮助我们抵抗自由基的伤害，延缓衰老。而且，番茄中的维生素C和钾，还能增强免疫力，保持心血管健康。\n🌟【番茄的百变吃法】\n番茄不饪秘籍】\n想要最大程度地保留番茄的营养，可以选择生吃或者快速烹饪。比如，做一道简单的番茄沙拉，或者用橄榄油轻炒，都能让番茄的风味和营养完美呈现。\n照片，可以是新鲜的番茄，也可以是番茄制成的各种美食，让人一看就有食欲。\n\n*标签*：#番茄功效 #健康生活 #宝藏食材 #笑不活了 #建议收藏 #家的味道 #吹爆这道菜
正在获取文章:关于怎么做一顿饭
*标题*：【沉浸式】一顿饭的诞生，厨房新手也能轻松搞定！🍽️\n\n*正文*：\nHey，亲爱的小伙伴们！今天我要带你们走进厨房，一起体验一顿饭的诞生过程。不用什么。是简单的一人食，还是丰盛的家庭聚餐？选择一些简单又美味的菜肴，比如番茄炒蛋、清蒸鱼、炒时蔬，再加上一碗香喷喷的米饭或者面条。\n\n🛒【采购食材】\n回到家后，及时清洗和处理食材。把蔬菜和肉类分别切好，分门别类放在不同的盘子里，这样烹饪时就不会手忙脚乱。\n\n🍳【烹饪时间】\n按照菜肴的复杂程度n👨‍🍳【烹饪技巧】\n- 炒菜时，热锅凉油可以防止食物粘锅。\n- 调味时，可以先少放一些，尝尝味道后再酌情添加。\n- 炖菜时，保持小火慢炖，这样食材的味道颜色和形状的食材，创造出美观的视觉效果。\n\n*📸首图建议*：一张摆盘精美的一顿饭的照片，包括主菜、配菜和主食，背景可以是整洁的餐桌，增加文章的吸引力和食欲感。\n\n*标签*：#做一顿饭 #厨房新手 #沉浸式烹饪 #美食秘方 #建议收藏 #家的味道 #美食每刻
Exiting.

```

## Future

[x] 自动开启多聊天通道(chat_id), 支持多线程同时多个聊天对话.

## 源码及exe

https://wwtw.lanzouq.com/iAiYD2cc5kna